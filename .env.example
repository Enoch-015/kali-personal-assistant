# ============================
# Kali Personal Assistant - Root Environment Variables
# ============================
# Copy this file to .env and fill in the values.
# NEVER commit .env to git - it contains sensitive credentials.

# ============================
# Runtime Environment
# ============================
NODE_ENV=development

# ============================
# Neon PostgreSQL Database (required for web app)
# ============================
NEON_DATABASE_URL="postgres://<user>:<password>@<your-neon-host>/<database>?sslmode=require"

# ============================
# Better Auth (required for web app)
# ============================
# Generate a strong random string (e.g. 32+ chars) for the auth secret.
BETTER_AUTH_SECRET="<random-secret>"

# Public base URL of your app (required for email links)
# Example for local dev: http://localhost:3000
BETTER_AUTH_BASE_URL="http://localhost:3000"

# ============================
# Resend Email (optional)
# ============================
# Enable to actually send verification & reset emails.
# If omitted, emails will be logged to the server console instead.
RESEND_API_KEY="re_<your-resend-api-key>"
RESEND_FROM_EMAIL="Your App <no-reply@your-domain.com>"

# ============================
# Vault Configuration
# ============================

# Vault root token for dev mode (REQUIRED)
# Generate with: ./scripts/generate-vault-token.sh
# ⚠️  NEVER use predictable tokens like "myroot" or "root"
VAULT_ROOT_TOKEN="<run-./scripts/generate-vault-token.sh>"

# ============================
# Service Credentials
# ============================
# These are generated by running: ./scripts/setup-vault.sh
# The setup script creates .vault-credentials.env with all credentials.
#
# FOR LOCAL DEVELOPMENT:
#   Source the credentials file or copy values below.
#   Each service looks for its prefixed vars (PYTHON_AI_VAULT_ROLE_ID, etc.)
#
# FOR DOCKER:
#   docker-compose.yaml automatically loads .vault-credentials.env
#   and maps the prefixed vars to VAULT_ROLE_ID for each container.
#   No need to copy values here - just run setup-vault.sh.

# Nuxt Web App (has WRITE access - admin UI)
NUXT_VAULT_ROLE_ID=""
NUXT_VAULT_SECRET_ID=""

# Python AI Service (READ-ONLY access)
PYTHON_AI_VAULT_ROLE_ID=""
PYTHON_AI_VAULT_SECRET_ID=""

# LiveKit Voice Service (READ-ONLY access)
LIVEKIT_VAULT_ROLE_ID=""
LIVEKIT_VAULT_SECRET_ID=""

# ============================
# Quick Start (Local Vault - Recommended for Dev)
# ============================
# 1. Install Vault CLI:
#    macOS:  brew install vault
#    Ubuntu: sudo apt install vault
#
# 2. Generate a secure root token:
#    export VAULT_ROOT_TOKEN=$(./scripts/generate-vault-token.sh)
#    echo "VAULT_ROOT_TOKEN=${VAULT_ROOT_TOKEN}" >> .env
#
# 3. Start Vault locally:
#    ./scripts/start-vault-dev.sh
#
# 4. Run the setup script (in another terminal):
#    ./scripts/setup-vault.sh
#
# 5. Copy credentials from .vault-credentials.env to this file and app-specific .env files
#
# 6. Update your actual secrets in Vault:
#    export VAULT_ADDR="http://127.0.0.1:8200"
#    export VAULT_TOKEN="$VAULT_ROOT_TOKEN"
#    vault kv patch secret/python-ai openai-api-key="sk-your-real-key"

# ============================
# Alternative: Docker Vault
# ============================
# If you prefer Docker over local install:
# 1. Generate token (same as above)
# 2. docker compose up -d vault
# 3. ./scripts/setup-vault.sh  (auto-detects Docker mode)
#    -> Credentials saved to .vault-credentials.env (gitignored)
# 4. Docker services auto-load credentials via env_file in docker-compose.yaml
# 5. For manual vault commands:
#    docker exec -e VAULT_TOKEN=$VAULT_ROOT_TOKEN vault-dev \
#      vault kv patch secret/python-ai openai-api-key="sk-your-real-key"
#
# Note: .vault-credentials.env contains VAULT_ROLE_ID and VAULT_SECRET_ID
# for each service. Docker Compose loads this automatically for app services.
